@using System.Globalization

@model IEnumerable<DoctorScheduleViewModel>
@{
    ViewData["Title"] = "Booked";
}
<h1>Booked</h1>
<form method="post">
    <table class="tbl-team">

        @{
            DateTime dateTime = DateTime.Now;
            foreach (var ds in Model)
            {
                if (ds.startDate.Date != dateTime)
                {
                    <tr>
                        @{
                            <td scope="col">@ds.startDate.ToString("dd.MM.yyyy")</td>
                            dateTime = ds.startDate.Date;

                            foreach (var date in Model.Where(x => x.startDate.Date == dateTime))
                            {
                                <td class="col">
                                    <input asp-for="@date.DoctorId" type="text" name="DoctorId" placeholder="DoctorId" required hidden />
                                    <input asp-for="@date.Doctors" type="text" name="Doctors" placeholder="Doctors" required hidden />
                                    <input asp-for="@date.startDate" type="text" name="startDate" placeholder="startDate" required hidden />
                                    @{
                                        if (@date.IsBusy == true)
                                        {
                                            <button class="ds-booked">@date.startDate.ToString("HH:mm")</button>
                                        }
                                        else
                                        {
                                            <button class="ds-free">@date.startDate.ToString("HH:mm")</button>
                                        }
                                    }
                                </td>
                            }
                        }
                    </tr>

                }

            }
        }

    </table>
</form>